<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Attractions Guide ‚Äì GJN-JP-2024-Sep</title>

<style>
  :root {
    --bg-main: #05060b;
    --bg-card: #11141f;
    --bg-soft: #181b26;
    --text-main: #f5f7ff;
    --text-muted: #b5bed5;
    --accent: #4ea8ff;
    --accent-soft: rgba(78,168,255,0.15);
    --border: rgba(255,255,255,0.08);
    --radius: 18px;
    --shadow: 0 18px 45px rgba(0,0,0,0.65);
  }
  body {
    margin: 0;
    padding: 20px 14px 40px;
    background: radial-gradient(circle at top, #15192a 0, #05060b 45%, #020308 100%);
    font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    color: var(--text-main);
    display: flex;
    justify-content: center;
  }
  .page { width: 100%; max-width: 900px; }
  h1 {
    font-size: clamp(26px,4vw,32px);
    text-align: center;
    margin: 0 0 6px;
  }
  .trip-flag {
    text-align: center;
    color: var(--text-muted);
    letter-spacing: .18em;
    font-size: 13px;
    margin-bottom: 4px;
  }
  .nav-row {
    margin-top: 14px;
    text-align: center;
    font-size: 14px;
  }
  .nav-row a {
    display: inline-block;
    margin: 0 6px;
    padding: 6px 12px;
    text-decoration: none;
    border-radius: 999px;
    background: rgba(255,255,255,0.05);
    border: 1px solid var(--border);
    color: var(--accent);
  }
  .city-title {
    margin: 32px 0 12px;
    font-size: 22px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card {
    background: linear-gradient(145deg,var(--bg-card),var(--bg-soft));
    border-radius: var(--radius);
    border: 1px solid var(--border);
    padding: 16px 18px 14px;
    margin-bottom: 14px;
    box-shadow: var(--shadow);
  }
  .card h3 {
    margin: 0 0 10px;
    font-size: 18px;
  }
  .meta {
    font-size: 13px;
    margin: 4px 0;
  }
  .meta span {
    display: inline-block;
    margin-right: 6px;
    color: var(--text-muted);
  }
  .btn-row {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .btn {
    padding: 6px 12px;
    border-radius: 10px;
    text-decoration: none;
    background: var(--accent-soft);
    color: var(--accent);
    border: 1px solid var(--border);
    font-size: 13px;
  }
  .comment {
    margin-top: 8px;
    padding: 6px 10px;
    background: rgba(255,255,255,0.04);
    border-radius: 10px;
    font-size: 13px;
    color: var(--text-muted);
  }

  #offline-external-message {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 9999;
    align-items: center;
    justify-content: center;
  }
  .offline-message-box {
    background: linear-gradient(145deg,var(--bg-card),var(--bg-soft));
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px 20px;
    max-width: 420px;
    box-shadow: var(--shadow);
    text-align: center;
  }
  .offline-message-box h3 {
    margin: 0 0 8px;
    font-size: 18px;
  }
  .offline-message-box p {
    font-size: 14px;
    color: var(--text-muted);
    margin: 0 0 14px;
  }
  .offline-message-box button {
    padding: 6px 14px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--accent-soft);
    color: var(--accent);
    font-size: 14px;
  }
</style>
</head>

<body>
<div class="page">

  <div class="trip-flag">JP ¬∑ GJN-2024-Sep ¬∑ Japan Trip</div>
  <h1>Attractions Guide</h1>

  <div class="nav-row">
    <a href="https://jp-gjn-2024-sep.trekworks.org/">‚Üê Back to Trip Home</a>
  </div>

  <div class="city-title">üïäÔ∏è Hiroshima</div>

  <div class="card">
    <h3>Peace Memorial Park</h3>
    <div class="meta"><span>Admission:</span>200 YEN</div>
    <div class="meta"><span>Hours:</span>7:30 to 19:00</div>
    <div class="meta"><span>Best time:</span>Afternoon</div>
    <div class="meta"><span>How to get there:</span>From Hiroshima Station, tram line 2 or 6 to Genbaku-Domu Mae (15 mins, 220 YEN)</div>
    <div class="comment">Admission ends 30 minutes before closing.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3400.html">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://www.klook.com/en-AU/activity/106604-hiroshima-peace-memorial-museum-permanent-exhibitions-admission/">Tickets / Info</button>
    </div>
  </div>

  <div class="card">
    <h3>Mazda Museum</h3>
    <div class="meta"><span>Admission:</span>Free</div>
    <div class="meta"><span>Hours:</span>14:15 to 16:15</div>
    <div class="meta"><span>Best time:</span>Afternoon</div>
    <div class="meta"><span>How to get there:</span>Local train from Hiroshima to Mukainada Station (5 mins), then 5-min walk</div>
    <div class="comment">Arrive at the Mazda Head Office lobby 15 minutes before departure time.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3405.html">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://www.mazda.com/en/about/museum/reservations/">Reservations</button>
    </div>
  </div>

  <div class="card">
    <h3>Shukkeien Garden</h3>
    <div class="meta"><span>Admission:</span>260 YEN</div>
    <div class="meta"><span>Hours:</span>9:00 AM ‚Äì 18:00</div>
    <div class="meta"><span>Best time:</span>Afternoon</div>
    <div class="meta"><span>How to get there:</span>15-min walk from Hiroshima Station or tram line 9</div>
    <div class="comment">Admission ends 30 minutes before closing.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3403.html">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://shukkeien.jp/guide/#entrance">Tickets / Info</button>
    </div>
  </div>

  <div class="card">
    <h3>Hiroshima Castle</h3>
    <div class="meta"><span>Admission:</span>370 YEN</div>
    <div class="meta"><span>Hours:</span>9:00 AM ‚Äì 18:00</div>
    <div class="meta"><span>Best time:</span>Morning</div>
    <div class="meta"><span>How to get there:</span>10-min walk from Kamiyacho-nishi tram stops</div>
    <div class="comment">Admission ends 30 minutes before closing.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3402.html">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://www.klook.com/en-AU/activity/151455-hiroshima-castle/">Tickets / Info</button>
    </div>
  </div>

  <div class="city-title">üéé Kyoto</div>

  <div class="card">
    <h3>Fushimi Inari Shrine</h3>
    <div class="meta"><span>Admission:</span>Free</div>
    <div class="meta"><span>Hours:</span>24 hours</div>
    <div class="meta"><span>Best time:</span>Early Morning</div>
    <div class="meta"><span>How to get there:</span>JR Nara Line to Inari</div>
    <div class="comment">Best visited early morning.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://inari.jp/en/">Official Site</button>
    </div>
  </div>

  <div class="city-title">üóº Tokyo</div>

  <div class="card">
    <h3>Asakusa Sensoji Temple</h3>
    <div class="meta"><span>Admission:</span>Free</div>
    <div class="meta"><span>Hours:</span>6:00 to 17:00</div>
    <div class="meta"><span>Best time:</span>Early Morning</div>
    <div class="meta"><span>How to get there:</span>Short walk from Asakusa Station</div>
    <div class="comment">Best visited early morning to avoid crowds.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3001.html">Official Site</button>
    </div>
  </div>

  <div class="card">
    <h3>Imperial Palace</h3>
    <div class="meta"><span>Admission:</span>Free</div>
    <div class="meta"><span>Hours:</span>24 hours (grounds)</div>
    <div class="meta"><span>Best time:</span>Varies</div>
    <div class="meta"><span>How to get there:</span>Near central Tokyo areas</div>
    <div class="comment">Some areas open on limited dates.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.japan-guide.com/e/e3017.html">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://sankan.kunaicho.go.jp/english/about/koukyo.html">Visit Info</button>
    </div>
  </div>

  <div class="card">
    <h3>TeamLab Planets</h3>
    <div class="meta"><span>Admission:</span>3,200 YEN</div>
    <div class="meta"><span>Hours:</span>10:00 AM ‚Äì 8:00 PM</div>
    <div class="meta"><span>Best time:</span>Morning or evening</div>
    <div class="meta"><span>How to get there:</span>Shin-Toyosu Station</div>
    <div class="comment">Immersive digital art experience.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://planets.teamlab.art/tokyo/">Official Site</button>
    </div>
  </div>

  <div class="card">
    <h3>Ghibli Museum</h3>
    <div class="meta"><span>Admission:</span>1,000 YEN</div>
    <div class="meta"><span>Hours:</span>10:00 AM ‚Äì 6:00 PM</div>
    <div class="meta"><span>Best time:</span>Book early</div>
    <div class="comment">Highly recommended for fans.</div>
    <div class="btn-row">
      <button class="btn external-link" type="button" data-external-url="https://www.ghibli-museum.jp/en/">Official Site</button>
      <button class="btn external-link" type="button" data-external-url="https://www.ghibli-museum.jp/en/ticket-information/">Tickets</button>
    </div>
  </div>

</div>

<div id="offline-external-message">
  <div class="offline-message-box">
    <h3>Offline</h3>
    <p>
      This content requires an internet connection.
      You can continue using the rest of the app while offline.
    </p>
    <button id="offline-message-close">OK</button>
  </div>
</div>

<script>
(function () {

  let externalNavigationPermitted = false;

  function resetConnectivityLatch() {
    externalNavigationPermitted = false;
  }

  function showOfflineMessage() {
    const box = document.getElementById("offline-external-message");
    if (box) box.style.display = "flex";
  }

  function hideOfflineMessage() {
    const box = document.getElementById("offline-external-message");
    if (box) box.style.display = "none";
  }

  async function confirmOnlineConfidence() {
    try {
      const controller = new AbortController();
      setTimeout(() => controller.abort(), 1500);

      await fetch("/", {
        method: "HEAD",
        cache: "no-store",
        signal: controller.signal
      });

      externalNavigationPermitted = true;
    } catch (e) {
      externalNavigationPermitted = false;
    }
  }

  window.addEventListener("offline", resetConnectivityLatch);
  document.addEventListener("visibilitychange", function () {
    if (document.visibilityState !== "visible") {
      resetConnectivityLatch();
    }
  });

  document.addEventListener("DOMContentLoaded", function () {
    const closeBtn = document.getElementById("offline-message-close");
    if (closeBtn) closeBtn.addEventListener("click", hideOfflineMessage);

    resetConnectivityLatch();

    if (navigator.onLine === true && document.visibilityState === "visible") {
      confirmOnlineConfidence();
    }
  });

  document.addEventListener("click", function (event) {
    const link = event.target.closest(".external-link");
    if (!link) return;

    event.preventDefault();

    const targetUrl = link.getAttribute("data-external-url");
    if (!targetUrl) return;

    if (externalNavigationPermitted !== true) {
      showOfflineMessage();
      return;
    }

    window.location.href =
      "external.html?url=" + encodeURIComponent(targetUrl);
  });

})();
</script>

</body>
</html>
