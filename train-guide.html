<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Train Transport Guide</title>

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: #0b111b;
        color: #e5e7eb;
        line-height: 1.55;
    }

    .page {
        max-width: 900px;
        margin: 0 auto;
        padding: 32px 16px;
    }

    h1 {
        text-align: center;
        font-size: 32px;
        margin-bottom: 4px;
        font-weight: 600;
    }

    h2 {
        text-align: center;
        font-size: 16px;
        font-weight: 400;
        color: #9ca3af;
        margin-bottom: 28px;
    }

    .back-btn {
        display: inline-block;
        margin: 0 auto 32px auto;
        padding: 8px 18px;
        background: #1f2937;
        color: #e5e7eb;
        border-radius: 8px;
        font-size: 14px;
        text-decoration: none;
        border: 1px solid #374151;
    }

    .card {
        background: #111827;
        border-radius: 14px;
        padding: 20px 22px;
        margin-bottom: 28px;
        box-shadow: 0 0 0 1px #1f2937 inset, 0 12px 24px rgba(0,0,0,0.25);
    }

    .fare-badge {
        float: right;
        background: #1e3a8a;
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        color: #dbeafe;
    }

    .label {
        font-weight: 600;
        color: #93c5fd;
    }

    .line-btn {
        display: inline-block;
        margin-top: 12px;
        padding: 6px 14px;
        background: #1f2937;
        border-radius: 6px;
        font-size: 13px;
        color: #93c5fd;
        border: 1px solid #374151;
        cursor: pointer;
    }

    /* ===== OFFLINE OVERLAY ===== */
    .offline-overlay {
        position: fixed;
        inset: 0;
        background: rgba(5,6,11,0.88);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }

    .offline-box {
        max-width: 420px;
        margin: 20px;
        padding: 20px 22px;
        background: #111827;
        border: 1px solid #374151;
        border-radius: 14px;
        text-align: center;
        box-shadow: 0 12px 24px rgba(0,0,0,0.4);
    }

    .offline-box h2 {
        margin: 0 0 10px;
        font-size: 20px;
        color: #e5e7eb;
    }

    .offline-box p {
        margin: 0 0 16px;
        font-size: 14px;
        color: #9ca3af;
    }

    .offline-box button {
        padding: 8px 16px;
        border-radius: 999px;
        border: 1px solid #374151;
        background: #1f2937;
        color: #93c5fd;
        font-size: 14px;
        cursor: pointer;
    }
</style>
</head>

<body>
<div class="page">

    <h1>Train Transport Guide</h1>
    <h2>JP · GJN-2024-Sep · Japan Trip</h2>

    <a class="back-btn" href="https://jp-gjn-2024-sep.trekworks.org/">
        ← Back to Trip Home
    </a>

    <div class="card">
        <div class="fare-badge">¥3,980</div>
        <div class="label">31 Aug 2024 — Kansai Airport → Candeo Hotels Osaka The Tower</div><br>
        <span class="label">Depart:</span> 8:35 PM<br>
        <span class="label">Arrive:</span> 9:36 PM<br>
        <span class="label">Duration:</span> 1 hour 01 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Kansai Airport Express Nankai-Namba<br>

        <button class="line-btn" onclick="handleExternal('https://www.nankai.co.jp/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥20,440</div>
        <div class="label">2 Sep 2024 — Shin-Osaka → Hiroshima</div><br>
        <span class="label">Depart:</span> 1:26 PM<br>
        <span class="label">Arrive:</span> 3:55 PM<br>
        <span class="label">Duration:</span> 2 hours 29 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Tokaido Shinkansen<br>

        <button class="line-btn" onclick="handleExternal('https://global.jr-central.co.jp/en/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥39,560</div>
        <div class="label">3 Sep 2024 — Hiroshima → Shinjuku</div><br>
        <span class="label">Depart:</span> 10:53 AM<br>
        <span class="label">Arrive:</span> 3:52 PM<br>
        <span class="label">Duration:</span> 4 hours 59 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Nozomi Hakata Shinkansen<br>

        <button class="line-btn" onclick="handleExternal('https://global.jr-central.co.jp/en/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥17,260</div>
        <div class="label">5 Sep 2024 — Shinjuku → Nagano</div><br>
        <span class="label">Depart:</span> 12:10 PM<br>
        <span class="label">Arrive:</span> 3:12 PM<br>
        <span class="label">Duration:</span> 3 hours 02 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Hokuriku Shinkansen<br>

        <button class="line-btn" onclick="handleExternal('https://www.jreast.co.jp/e/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥17,660</div>
        <div class="label">6 Sep 2024 — Nagano → Shinjuku</div><br>
        <span class="label">Depart:</span> 12:31 PM<br>
        <span class="label">Arrive:</span> 3:14 PM<br>
        <span class="label">Duration:</span> 2 hours 43 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Hokuriku Shinkansen<br>

        <button class="line-btn" onclick="handleExternal('https://www.jreast.co.jp/e/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥28,340</div>
        <div class="label">7 Sep 2024 — Shinjuku → Kyoto</div><br>
        <span class="label">Depart:</span> 1:25 PM<br>
        <span class="label">Arrive:</span> 4:00 PM<br>
        <span class="label">Duration:</span> 2 hours 35 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Tokaido Shinkansen<br>

        <button class="line-btn" onclick="handleExternal('https://global.jr-central.co.jp/en/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥1,440</div>
        <div class="label">8 Sep 2024 — Kyoto → Cosmosquare Station</div><br>
        <span class="label">Depart:</span> 1:25 PM<br>
        <span class="label">Arrive:</span> 4:00 PM<br>
        <span class="label">Duration:</span> 2 hours 35 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Keihan Main Line<br>

        <button class="line-btn" onclick="handleExternal('https://www.keihan.co.jp/travel/en/')">Line Info</button>
    </div>

    <div class="card">
        <div class="fare-badge">¥2,520</div>
        <div class="label">9 Sep 2024 — Shin-Osaka → Kansai Airport</div><br>
        <span class="label">Depart:</span> 1:25 PM<br>
        <span class="label">Arrive:</span> 4:00 PM<br>
        <span class="label">Duration:</span> 2 hours 35 minutes<br>
        <span class="label">Fare Type:</span> Green Class (2 passengers)<br>
        <span class="label">Line:</span> Nankai Line<br>

        <button class="line-btn" onclick="handleExternal('https://www.nankai.co.jp/')">Line Info</button>
    </div>

</div>

<div class="offline-overlay" id="offlineOverlay">
    <div class="offline-box">
        <h2>You’re offline</h2>
        <p>
            This content requires an internet connection.<br>
            You can continue using other parts of the app while offline.
        </p>
        <button onclick="closeOffline()">OK</button>
    </div>
</div>

<script>
function handleExternal(url) {
    verifyConnectivity()
        .then(function () {
            window.location.href =
                './external.html?url=' + encodeURIComponent(url) + '&back=train-guide.html';
        })
        .catch(function () {
            showOffline();
        });
}

function verifyConnectivity() {
    return new Promise(function (resolve, reject) {
        const controller = new AbortController();
        const timeout = setTimeout(function () {
            controller.abort();
            reject();
        }, 800);

        fetch('./external.html', {
            cache: 'no-store',
            signal: controller.signal
        })
        .then(function () {
            clearTimeout(timeout);
            resolve();
        })
        .catch(function () {
            clearTimeout(timeout);
            reject();
        });
    });
}

function showOffline() {
    document.getElementById('offlineOverlay').style.display = 'flex';
}

function closeOffline() {
    document.getElementById('offlineOverlay').style.display = 'none';
}
</script>

</body>
</html>
